{% extends "base.html" %}
{% from "macros/utility.html" import renderPagination, renderFlashedMessages, renderArticle, renderUserInfo %}

{% block css %}
{{ super() }}
<link href="{{ url_for('static', filename='css/main/base.css') }}" rel="stylesheet"/>
{% endblock css %}

{% block title %}Blog-主题{% endblock title %}


{% block subscriptionsActived %}class="active"{% endblock subscriptionsActived %}


{% block content %}
    <div class="container">
        <div class="row">

            <div class="col-sm-9">

                {{ renderFlashedMessages('warning') }}

                {% if not concernedTags %}
                <div id="not-follow-info">
                    <h4>您还未关注任何主题，<a href="{{ url_for('main.index') }}"><small>去逛逛？</small></a></h4>
                </div>

                {% else %}


                <div class="tag-category-container">
                    <h4>您已关注的主题：</h4>
                    <ul class="tag-category">
                        {% for tag in current_user.concernedTags.all() %}
                        {% if tag.id != currentTagId %}
                        <li>
                            <a href="{{ url_for('main.concernedTags', tagId=tag.id) }}">{{ tag.name }}</a>
                        </li>
                        {% else %}
                        <li class="active">
                            <a href="#">{{ tag.name }}</a>
                        </li>
                        {% endif %}
                        {% endfor %}
                    </ul>
                </div>


                {% if not pagination or not pagination.items %}

                <div id="no-article-info">
                    <h4>并没有相关文章。。。</h4>
                </div>

                {% else %}

                {% for article in pagination.items %}
                {{ renderArticle(article) }}
                {% endfor %}

                <div id="pagination">
                    <center>
                        {{ renderPagination(pagination, 'main.concernedTags', tagId=currentTagId) }}
                    </center>
                </div>

                {% endif %}

                {% endif %}

            </div>

            <div id="extra-info" class="col-sm-3">
                {% if current_user.is_authenticated %}
                {{ renderUserInfo(current_user) }}
                {% else %}
                <h4 class="text-center">您还未登录</h4>
                {% endif %}
            </div>

        </div>
    </div>
{% endblock content %}
